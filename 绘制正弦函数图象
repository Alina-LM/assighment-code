#include <stdio.h>
#include <math.h>
#define PI 3.14159265358979323846

int main()
{
    int degrees;
    double radians, sin_value;    
    printf("***************************************\n")
for (degrees = 0; degrees <= 330; degrees += 15) //一个角度就循环一次
{
        radians = degrees * PI / 180.0;
        sin_value = sin(radians);

        // 修正输出格式
        printf("sin(%3d)=%7.4f ", degrees, sin_value);

        // 位置计算（四舍五入）
        int pos_sin = (int)((sin_value + 1.0) * 20 + 0.5);//实现四舍五入，并把函数值域平移加扩大
        int pos_zero = 20;
        // 输出图形
        for (int i = 0; i <= 40; i++) {
            if (i == pos_sin && i == pos_zero) {
                printf("*"); // 曲线与零点重合
            } else if (i == pos_sin) {
                printf("*"); // 曲线点
            } else if (i == pos_zero) {
                printf(" "); // 空白
            }
        }
        printf("\n");
    }

    return 0;
}
